<!DOCTYPE html>
<title>HTML Library</title>
<form method=GET action=/search>
  <input type=search name=query placeholder="search your library">
  <button>Search</button>
</form>
<form method=POST action=/mode>
  <p>
    <label>
      <input type=radio name=mode value=save>
      Save
    </label>
    <label>
      <input type=radio name=mode value=serve>
      Serve
    </label>
  <p>
    <button>Change mode</button>
  <script>
    const form = document.currentScript.closest('form');
    showCurrentMode();

    async function showCurrentMode() {
      const mode = await fetch('/mode').then(r => r.text());
      form.querySelector(`[name="mode"][value="${mode}"]`).checked = true;
    }
  </script>
</form>
<form method=POST action=/library_path>
  <p>
    Set the path to your archive
    <label>
      Library path
      <input type=text name=library_path placeholder="Library path...">
    </label>
  <p>
    <button>Change path</button>
  <script>
    const form = document.currentScript.closest('form');
    showCurrentLibraryPath();

    async function showCurrentLibraryPath() {
      const library_path = await fetch('/library_path').then(r => r.text());
      form.querySelector(`[name="library_path"]`).value = librar_path;
    }
  </script>
</form>
